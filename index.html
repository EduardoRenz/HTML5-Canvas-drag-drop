<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <title>Drag And Drop</title>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <script src="game.js"></script>
    <script src="component.js"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body onload="startGame()">
    <h3>Canvas</h3>
    <canvas id="canvas" style="border:1px solid #b2b2b2;"></canvas>
    <h3>HTML</h3>
    <section id="htmlcanvas">
        <div class="box_container">
            <div class="box">
                <div id="item" class="item" draggable="true"></div>
            </div>
            <div class="box"></div>
            <div class="box"></div>
        </div>

    </section>


</body>
</html>

<script>
    //Canvas experiment code
    let game = null
    function startGame() {
        game = new Game()
        game.start();
    }

    let components = [
        new Component(400,20,100,100,'red'),
        new Component(20,20,100,100,'blue'),
        new Component(200,20,100,100,'green'),
    ]

    function update() {
        game.clear()
        game.context.font = "30px Arial";
        game.context.fillStyle = "black";
        game.context.fillText(`x:${game.mouseX} y:${game.mouseY}`, game.canvas.width - 200, 50); 
        game.context.fillText(`dragging:${game.isdragging}`, game.canvas.width - 200, 100); 

        for (const square of components) {
            square.draw()
        }
     
    }

    //HTML experiment code

    const boxes = document.querySelectorAll(".box")

    for (const box of boxes) {
        box.addEventListener('dragover',(e)=>{
            e.preventDefault()
            //console.log('passou por cima')
        })
        box.addEventListener('dragleave',()=>{
            console.log('leave')
        })
        box.addEventListener('drop',(evt)=>{
            console.log('largou aqui')
            console.log(evt.target.appendChild(item))
        })
    }


    let item = document.querySelector("#item")
    item.addEventListener('drag',()=>{
        item.style.visibility = 'hidden'
        //console.log('dragging')

    })
    item.addEventListener('dragend',(evt)=>{

    item.style.visibility = 'visible'
        //console.log(evt)
    })


</script>